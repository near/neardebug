<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Debugger for NEAR Protocol Contracts</title>
    <meta name="description" content="A web-based tool for debugging contracts written for NEAR Protocol">
    <script async type="module" src="./loader.js"></script>
    <link rel="stylesheet" type="text/css" href="./neardebug.css">
</head>
<body>
    <header>
    <h2>
    A basic debugger for NEAR Contracts (prototype ver.)
    </h2>

    <p>
    Here you can execute and debug – inside your browser – contracts meant to run on the NEAR
    protocol. Use the browser built-in developer tools (often available via
    <kbd>Ctrl</kbd>/<kbd>Cmd</kbd> <kbd>Shift</kbd><kbd>I</kbd>): log messages and errors will show
    up in the console and you can use the debugger to step through the contract code.
    </p>

    <p>
    The debugging experience will differ between browsers. For instance Chromium supports DWARF
    debug info. Contracts built from Rust source will embed such debug info into the
    <code>.wasm</code> file, as long as debug info is enabled. This would then allow
    debugging Rust code and not the underlying WebAssembly!
    </p>

    <p>
    <code>window.contract</code> in the console will allow you to explore some specifics of the
    contract runtime throughout the execution of the contract.
    </p>
    </header>


    <form id="contract_form">

    <label for="contract">Contract WASM </label>
    <input type="file" name="contract" id="contract" />
    <label for="methods">Method </label>
    <select id="methods" name="method"></select>
    <input type="submit" id="execute" value="Execute!" disabled />

    <h3>Context</h3>

    <label for="input">Input (args)</label>
    <textarea id="input" name="input" placeholder="{}"></textarea>
    <label for="gas">Gas</label>

    <div class="gas_input">
    <input type="text" name="gas" id="gas" placeholder="300000000000000" />
    <span></span>
    </div>

    <label for="current_account">Contract Account</label>
    <input type="text" name="current_account" id="current_account" placeholder="alice.near" />
    <label for="predecessor_account">Predecessor Account</label>
    <input type="text" name="predecessor_account" id="predecessor_account" placeholder="bob.near" />
    <label for="signer_account">Signer Account</label>
    <input type="text" name="signer_account" id="signer_account" placeholder="bob.near" />
    <label for="signer_account_pk">Transaction Sign PK</label>
    <input type="text" name="signer_account_pk" id="signer_account_pk" placeholder="11111111111111111111111111111111" />
    <label for="attached_deposit">Attached Deposit (yoctoⓃ)</label>

    <div class="near_input">
    <input type="text" name="attached_deposit" id="attached_deposit" placeholder="0" />
    <span></span>
    </div>

    <label for="balance">Balance (yoctoⓃ)</label>
    <div class="near_input">
    <input type="text" name="balance" id="balance" placeholder="100000000000000000000000000" />
    <span></span>
    </div>

    <label for="locked_balance">Locked Balance (yoctoⓃ)</label>
    <div class="near_input">
    <input type="text" name="locked_balance" id="locked_balance" placeholder="500000000000000000000000" />
    <span></span>
    </div>

    <label for="block_height">Block height</label>
    <input type="text" name="block_height" id="block_height" placeholder="0" />
    <label for="block_timestamp">Block timestamp</label>
    <input type="text" name="block_timestamp" id="block_timestamp" placeholder="0" />
    <label for="epoch_height">Epoch height</label>
    <input type="text" name="epoch_height" id="epoch_height" placeholder="0" />
    <label for="random_seed">Random Seed</label>
    <input type="text" name="random_seed" id="random_seed" placeholder="5TeWSsjg2gbxCyWVniXeCmwM7UtHTCK7svzJr5xYJzHf" />

    <h3>State</h3>

    <label for="store_size">Current storage size</label>
    <input type="text" name="store_size" id="store_size" disabled placeholder="0">
    <label></label><button id="load_store">Load previously downloaded storage</button>
    <label></label><button id="download_store">Download current storage</button>






    </form>


</body>
</html>
